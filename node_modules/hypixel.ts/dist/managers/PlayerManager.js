"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.PlayerManager = void 0;
const _1 = require(".");
const classes_1 = require("../classes");
const lib_1 = require("../lib");
class PlayerManager extends _1.BaseManager {
    constructor(client) {
        super(client);
    }
    async fetch(nameOrUUID) {
        const isUUID = this.client.util.isUUID(nameOrUUID);
        const uuid = isUUID ? nameOrUUID : await this.getUUID(nameOrUUID);
        const requestData = new lib_1.RequestData({ query: { uuid } });
        const data = await this.client.api.player.get(requestData);
        return new classes_1.Player(this.client, data.player);
    }
    async getRecentlyPlayedGames(nameOrUUID) {
        const isUUID = this.client.util.isUUID(nameOrUUID);
        const uuid = isUUID ? nameOrUUID : await this.getUUID(nameOrUUID);
        const requestData = new lib_1.RequestData({ query: { uuid } });
        const { games } = await this.client.api.recentgames.get(requestData);
        return games;
    }
    async getStatus(nameOrUUID) {
        const isUUID = this.client.util.isUUID(nameOrUUID);
        const uuid = isUUID ? nameOrUUID : await this.getUUID(nameOrUUID);
        const requestData = new lib_1.RequestData({ query: { uuid } });
        const { session } = await this.client.api.status.get(requestData);
        return session;
    }
    async getUUID(name) {
        return this.client.util.getUUID(name);
    }
}
exports.PlayerManager = PlayerManager;
//# sourceMappingURL=PlayerManager.js.map